// Data Structure
const diasData = [
    {
        id: 1,
        titulo: "Reset Mental - Eliminando Cren√ßas Limitantes",
        icone: "üß†",
        tempoEstimado: "25 min",
        descricao: "Identifique e reprograme suas cren√ßas limitantes sobre dinheiro",
        conteudo: [
            {
                tipo: "intro",
                titulo: "A Verdade que Ningu√©m Quer Contar",
                texto: "Voc√™ n√£o est√° quebrado por falta de dinheiro. Voc√™ est√° quebrado por causa das cren√ßas que voc√™ carrega sobre dinheiro. Sua programa√ß√£o mental financeira foi instalada antes dos 7 anos de idade, quando voc√™ absorvia TUDO que via e ouvia - sem filtros, sem questionamentos. Se voc√™ cresceu ouvindo 'dinheiro n√£o d√° em √°rvore', 'rico √© ladr√£o', 'tem que ralar muito para ganhar pouco', essas frases viraram VERDADES ABSOLUTAS no seu subconsciente. E agora, mesmo que conscientemente voc√™ queira ser rico, seu subconsciente sabota cada oportunidade, porque ele ainda acredita naquelas mentiras da inf√¢ncia."
            },
            {
                tipo: "exercicio",
                titulo: "Exerc√≠cio 1: Diagn√≥stico de Cren√ßas Limitantes",
                perguntas: [
                    "Qual foi a mensagem mais comum que voc√™ ouvia sobre dinheiro na inf√¢ncia?",
                    "Qual √© a cren√ßa limitante que mais te paralisa HOJE?",
                    "Se voc√™ ficasse rico amanh√£, qual seria seu maior medo?",
                    "Complete: 'Pessoas ricas s√£o...'"
                ]
            },
            {
                tipo: "afirmacao",
                titulo: "Script de Reprograma√ß√£o",
                texto: "Leia em voz alta 3 vezes ao acordar:",
                afirmacao: "Libero todas as cren√ßas limitantes sobre dinheiro que absorvi no passado. Elas n√£o s√£o minhas, n√£o s√£o verdadeiras e n√£o me servem mais. Eu escolho acreditar que sou merecedor de riqueza abundante, que o dinheiro flui naturalmente para mim e que posso ser rico sendo uma pessoa boa e honesta. Minha nova identidade financeira come√ßa HOJE."
            },
            {
                tipo: "acao",
                titulo: "A√ß√£o do Dia 1",
                texto: "Escreva em um papel as 3 principais cren√ßas limitantes que voc√™ identificou. Depois, rasgue o papel em peda√ßos pequenos enquanto diz em voz alta: 'Isso n√£o √© mais minha verdade'. Este ato f√≠sico tem poder psicol√≥gico profundo."
            }
        ]
    },
    {
        id: 2,
        titulo: "Afirma√ß√µes Financeiras Power",
        icone: "‚ú®",
        tempoEstimado: "20 min",
        descricao: "As 21 afirma√ß√µes que reprogramam seu subconsciente",
        conteudo: [
            {
                tipo: "intro",
                titulo: "Por Que Afirma√ß√µes Funcionam?",
                texto: "Seu c√©rebro n√£o diferencia imagina√ß√£o v√≠vida de realidade. Quando voc√™ repete uma afirma√ß√£o com emo√ß√£o e convic√ß√£o, voc√™ est√° literalmente criando novos caminhos neurais. A neuroci√™ncia chama isso de neuroplasticidade. Cada repeti√ß√£o fortalece esses caminhos at√© que sua nova cren√ßa se torne autom√°tica. Mas tem um segredo: N√ÉO BASTA LER. Voc√™ precisa SENTIR. Feche os olhos, visualize a afirma√ß√£o sendo verdade, e SINTA a emo√ß√£o de j√° ter aquilo."
            },
            {
                tipo: "afirmacoes",
                titulo: "As 21 Afirma√ß√µes de Transforma√ß√£o Financeira",
                lista: [
                    "Eu sou uma pessoa naturalmente pr√≥spera",
                    "Meu potencial de ganho √© infinito",
                    "Atraio oportunidades de renda constantemente",
                    "Meu dinheiro trabalha para mim enquanto durmo",
                    "Sou merecedor de riqueza e abund√¢ncia",
                    "Cada dia me aproxima de minha liberdade financeira",
                    "Minha mentalidade de riqueza atrai riqueza real",
                    "Tomo decis√µes financeiras s√°bias e rent√°veis",
                    "Meu dinheiro se multiplica atrav√©s de investimentos inteligentes",
                    "Eu ganho dinheiro fazendo o que amo",
                    "Oportunidades de lucro aparecem naturalmente em meu caminho",
                    "Sou uma pessoa de a√ß√£o em rela√ß√£o a minhas finan√ßas",
                    "Crio m√∫ltiplas fontes de renda",
                    "Meu trabalho vale muito dinheiro",
                    "Sou grato por toda a abund√¢ncia que flui para mim",
                    "Minha vida √© um exemplo de sucesso financeiro",
                    "Dinheiro vem a mim de formas esperadas e inesperadas",
                    "Eu mere√ßo o melhor que a vida oferece",
                    "Minha conta banc√°ria cresce constantemente",
                    "Sou livre financeiramente",
                    "A riqueza √© meu estado natural"
                ]
            },
            {
                tipo: "acao",
                titulo: "Protocolo de Hoje",
                texto: "Escolha 7 afirma√ß√µes da lista acima (as que mais ressoam com voc√™). Configure 3 alarmes no celular: manh√£, tarde e noite. Quando o alarme tocar, pare TUDO por 2 minutos e repita suas 7 afirma√ß√µes em voz alta com EMO√á√ÉO. Fa√ßa isso religiosamente por 21 dias."
            }
        ]
    },
    {
        id: 3,
        titulo: "Medita√ß√£o da Abund√¢ncia",
        icone: "üßò",
        tempoEstimado: "15 min",
        descricao: "Protocolo de 15 minutos para conectar com a abund√¢ncia",
        conteudo: [
            {
                tipo: "intro",
                titulo: "O Poder da Medita√ß√£o",
                texto: "Estudos da Universidade de Harvard provaram que 15 minutos di√°rios de medita√ß√£o reduzem cortisol (horm√¥nio do estresse) em 47% e aumentam a atividade no c√≥rtex pr√©-frontal (√°rea da tomada de decis√µes). Quando voc√™ est√° estressado, seu c√©rebro entra em modo de sobreviv√™ncia - e nesse modo, √© IMPOSS√çVEL pensar em abund√¢ncia. A medita√ß√£o te tira do modo escassez e te coloca no modo abund√¢ncia."
            },
            {
                tipo: "guia",
                titulo: "Guia da Medita√ß√£o (15 minutos)",
                passos: [
                    "Fase 1 - Ancoragem (3 min): Sente confortavelmente, feche os olhos, respire fundo 10 vezes. Conte cada respira√ß√£o. Sinta seu corpo relaxar completamente.",
                    "Fase 2 - Visualiza√ß√£o (5 min): Imagine sua vida ideal com abund√¢ncia financeira. Veja sua conta banc√°ria, seu estilo de vida, suas conquistas. N√£o force, deixe as imagens virem naturalmente.",
                    "Fase 3 - Sentimento (5 min): Agora SINTA a gratid√£o, a paz, a alegria de j√° ter essa abund√¢ncia. Expanda esse sentimento pelo seu peito, pelo corpo todo. Sorria.",
                    "Fase 4 - Afirma√ß√£o Final (2 min): Mentalmente, repita: 'Eu sou abund√¢ncia. Eu atraio riqueza. Eu mere√ßo prosperidade.' Volte lentamente, abra os olhos."
                ]
            },
            {
                tipo: "acao",
                titulo: "Seu Compromisso do Dia 3",
                texto: "Fa√ßa essa medita√ß√£o HOJE, preferencialmente pela manh√£ antes de qualquer atividade. Se poss√≠vel, use fones de ouvido com m√∫sica instrumental suave (busque 'meditation music 432hz' no YouTube). Anote como se sentiu ap√≥s a pr√°tica."
            }
        ]
    },
    {
        id: 4,
        titulo: "Os 3 H√°bitos N√£o-Negoci√°veis",
        icone: "‚ö°",
        tempoEstimado: "20 min",
        descricao: "Os h√°bitos que todos os milion√°rios compartilham",
        conteudo: [
            {
                tipo: "intro",
                titulo: "A Descoberta",
                texto: "Thomas Corley estudou 233 milion√°rios por 5 anos e descobriu que 88% deles t√™m 3 h√°bitos em comum. N√£o √© sorte. N√£o √© privil√©gio. S√£o H√ÅBITOS DI√ÅRIOS que qualquer um pode adotar. A diferen√ßa entre voc√™ e um milion√°rio n√£o √© talento - √© rotina."
            },
            {
                tipo: "habitos",
                titulo: "Os 3 H√°bitos",
                lista: [
                    {
                        nome: "H√°bito #1: Acordar Cedo",
                        descricao: "44% dos milion√°rios acordam 3 horas antes do trabalho come√ßar. Por qu√™? Porque as primeiras horas do dia s√£o as mais produtivas. Seu cortisol est√° no pico, sua for√ßa de vontade est√° cheia. Use esse tempo para trabalhar em VOC√ä (n√£o em emails, n√£o em redes sociais)."
                    },
                    {
                        nome: "H√°bito #2: Ler 30 Minutos/Dia",
                        descricao: "88% dos milion√°rios leem 30 minutos por dia - mas n√£o fic√ß√£o. Eles leem biografias, livros de neg√≥cios, desenvolvimento pessoal. Warren Buffett l√™ 500 p√°ginas por dia. Bill Gates l√™ 50 livros por ano. Conhecimento √© LITERALMENTE poder - poder de tomar decis√µes melhores."
                    },
                    {
                        nome: "H√°bito #3: Networking Ativo",
                        descricao: "79% dos milion√°rios dedicam 5+ horas por m√™s em networking estrat√©gico. Seu network determina seu net worth. Voc√™ n√£o precisa de milhares de contatos - voc√™ precisa de CONEX√ïES DE QUALIDADE com pessoas que pensam grande."
                    }
                ]
            },
            {
                tipo: "acao",
                titulo: "Seu Desafio do Dia 4",
                texto: "Escolha UM dos 3 h√°bitos e implemente HOJE. Comece pequeno: acorde 30 min mais cedo OU leia 10 p√°ginas OU mande mensagem para 1 pessoa do seu network. Consist√™ncia > Intensidade."
            }
        ]
    },
    {
        id: 5,
        titulo: "Planejamento SMARTER",
        icone: "üéØ",
        tempoEstimado: "25 min",
        descricao: "Crie sua meta de 90 dias com precis√£o",
        conteudo: [
            {
                tipo: "intro",
                titulo: "Por Que a Maioria Falha?",
                texto: "92% das pessoas abandonam suas metas antes de 30 dias. Sabe por qu√™? Porque elas definem metas BURRAS: 'quero ser rico', 'quero ganhar mais dinheiro', 'quero sair das d√≠vidas'. Essas metas s√£o vagas, sem prazo, sem m√©todo. Seu c√©rebro n√£o consegue trabalhar com isso. Voc√™ precisa de uma meta SMARTER."
            },
            {
                tipo: "metodo",
                titulo: "O Sistema SMARTER",
                texto: "S - Specific (Espec√≠fica): N√£o 'ganhar mais', mas 'ganhar R$ 10.000/m√™s'\nM - Measurable (Mensur√°vel): Como voc√™ vai medir? Extrato banc√°rio? N√∫mero de clientes?\nA - Achievable (Alcan√ß√°vel): Desafiadora mas realista para seu contexto\nR - Relevant (Relevante): Por QU√ä voc√™ quer isso? Qual o prop√≥sito emocional?\nT - Time-bound (Com Prazo): 90 dias √© o prazo ideal (curto o suficiente para urg√™ncia, longo o suficiente para resultados)\nE - Evaluate (Avaliar): Revisar progresso semanalmente\nR - Readjust (Reajustar): Flexibilidade para mudar a estrat√©gia (n√£o a meta)"
            },
            {
                tipo: "exercicio",
                titulo: "Seu Exerc√≠cio",
                perguntas: [
                    "Qual √© minha meta financeira espec√≠fica para os pr√≥ximos 90 dias? (ex: aumentar renda em R$ 3.000/m√™s)",
                    "Como vou medir meu progresso semanalmente?",
                    "Por QUE essa meta √© importante para mim? Qual emo√ß√£o ela vai me dar?",
                    "Quais s√£o as 3 a√ß√µes principais que v√£o me levar at√© l√°?"
                ]
            },
            {
                tipo: "acao",
                titulo: "Sua Meta Final",
                texto: "Escreva sua meta no formato: 'At√© [data espec√≠fica], eu vou [meta espec√≠fica] medindo [como] porque [raz√£o emocional].' Exemplo: 'At√© 1 de fevereiro de 2025, eu vou ganhar meus primeiros R$ 5.000 com freelancing medindo pelo total de projetos fechados porque isso vai me dar liberdade de tempo com minha fam√≠lia.'"
            }
        ]
    },
    {
        id: 6,
        titulo: "Visualiza√ß√£o Criativa Avan√ßada",
        icone: "üé¨",
        tempoEstimado: "20 min",
        descricao: "Imprima seu futuro no seu subconsciente",
        conteudo: [
            {
                tipo: "intro",
                titulo: "A Ci√™ncia da Visualiza√ß√£o",
                texto: "Atletas ol√≠mpicos usam visualiza√ß√£o h√° d√©cadas. Estudos provam que quando voc√™ visualiza uma a√ß√£o, seu c√©rebro ativa os MESMOS neur√¥nios como se voc√™ estivesse realmente fazendo aquilo. √â por isso que pianistas podem melhorar sua t√©cnica apenas imaginando tocar. A visualiza√ß√£o n√£o √© 'pensamento positivo fofo' - √© treinamento cerebral de alto n√≠vel."
            },
            {
                tipo: "protocolo",
                titulo: "Protocolo de Visualiza√ß√£o (10 min/dia)",
                passos: [
                    "Passo 1 - Cena Espec√≠fica: Escolha UM momento espec√≠fico do seu futuro abundante. N√£o 'ser rico' - mas um momento: voc√™ abrindo o extrato e vendo seu saldo, voc√™ assinando um contrato grande, voc√™ comprando algo importante.",
                    "Passo 2 - Detalhes Sensoriais: Veja as cores, ou√ßa os sons, sinta as texturas, cheire os aromas. Quanto mais real, melhor. Seu c√©rebro precisa de detalhes para acreditar.",
                    "Passo 3 - Emo√ß√£o Amplificada: Sinta a euforia, o orgulho, a gratid√£o, a paz. A emo√ß√£o √© o combust√≠vel que faz a visualiza√ß√£o funcionar. Sem emo√ß√£o = sem poder.",
                    "Passo 4 - Repeti√ß√£o Di√°ria: Mesma cena, todo dia, por 21 dias. Seu subconsciente vai come√ßar a aceitar essa cena como 'mem√≥ria futura' e vai guiar suas a√ß√µes para torn√°-la real."
                ]
            },
            {
                tipo: "acao",
                titulo: "Seu Comprometimento",
                texto: "Defina AGORA qual cena voc√™ vai visualizar pelos pr√≥ximos 21 dias. Seja espec√≠fico. Depois, fa√ßa sua primeira sess√£o de visualiza√ß√£o de 10 minutos HOJE, preferencialmente antes de dormir."
            }
        ]
    },
    {
        id: 7,
        titulo: "Plano de A√ß√£o 90 Dias",
        icone: "üöÄ",
        tempoEstimado: "30 min",
        descricao: "A ponte entre sonho e realidade financeira",
        conteudo: [
            {
                tipo: "intro",
                titulo: "Por Que Hoje √© o Dia Mais Importante",
                texto: "Voc√™ passou 6 dias reprogramando sua mente. Agora √© hora da A√á√ÉO. Porque a verdade brutal √© essa: mindset sem a√ß√£o √© ilus√£o. Voc√™ pode ter a melhor mentalidade do mundo, mas se n√£o agir, nada muda. O Dia 7 √© onde transforma√ß√£o mental vira transforma√ß√£o financeira real."
            },
            {
                tipo: "verdade",
                titulo: "A Verdade Sobre A√ß√£o",
                texto: "Voc√™ n√£o precisa de um plano perfeito. Voc√™ precisa de um plano CLARO e SIMPLES que voc√™ possa seguir consistentemente. Planos complexos s√£o abandonados. Planos simples s√£o executados. Seu plano de 90 dias precisa ter no m√°ximo 3 objetivos principais. Mais que isso e voc√™ se sabota."
            },
            {
                tipo: "plano",
                titulo: "Seu Plano de 90 Dias (Estrutura Simples)",
                fases: [
                    {
                        nome: "M√™s 1 - Funda√ß√£o",
                        descricao: "Foco: Aprender + Preparar. Defina sua estrat√©gia principal de renda (freelancing? venda de produto? consultoria?). Fa√ßa cursos, consuma conte√∫do, prepare sua oferta. Objetivo: terminar o m√™s com sua 'arma' pronta."
                    },
                    {
                        nome: "M√™s 2 - Valida√ß√£o",
                        descricao: "Foco: Testar + Ajustar. Lance sua oferta para o mercado. N√£o precisa ser perfeito. Teste com 10-20 pessoas. Colete feedback. Ajuste. Objetivo: fazer suas primeiras vendas/clientes e validar que funciona."
                    },
                    {
                        nome: "M√™s 3 - Escala",
                        descricao: "Foco: Multiplicar + Otimizar. Agora que validou, escale. Mais alcance, mais clientes, mais vendas. Automatize o que der. Delegue o que puder. Objetivo: bater ou superar sua meta de 90 dias."
                    }
                ]
            },
            {
                tipo: "exercicio",
                titulo: "Seus 3 Compromissos Finais",
                perguntas: [
                    "Qual √© a UMA atividade de gera√ß√£o de renda que vou implementar nos pr√≥ximos 90 dias?",
                    "Quais s√£o as 3 a√ß√µes SEMANAIS que vou fazer sem falta para atingir minha meta?",
                    "Como vou me responsabilizar? (parceiro de accountability? grupo? coach?)"
                ]
            },
            {
                tipo: "finalizacao",
                titulo: "Pr√≥ximos Passos",
                texto: "Parab√©ns por completar os 7 Dias! Voc√™ n√£o √© mais a mesma pessoa. Sua mentalidade mudou. Agora √© hora de transformar isso em resultados tang√≠veis. Continue revisitando este protocolo, especialmente nos momentos de d√∫vida. E lembre-se: a jornada para a abund√¢ncia √© feita de a√ß√£o consistente, n√£o de momentos de inspira√ß√£o. Voc√™ tem tudo que precisa. Agora, VAI!"
            }
        ]
    }
];

const motivationalMessages = [
    "Voc√™ est√° transformando sua vida AGORA",
    "Milion√°rios fazem isto todos os dias",
    "Sua abund√¢ncia est√° pr√≥xima",
    "Isto √© apenas o come√ßo",
    "Voc√™ est√° diferente agora",
    "A riqueza vem para quem persiste",
    "Seu subconsciente est√° sendo reprogramado",
    "Parab√©ns por agir enquanto outros falam"
];

const badges = [
    { id: 1, nome: "Primeiro Passo", descricao: "Dia 1 Conclu√≠do!", emoji: "üéØ" },
    { id: 2, nome: "Afirmador", descricao: "Dia 2 Conclu√≠do!", emoji: "‚ú®" },
    { id: 3, nome: "Meditador", descricao: "Dia 3 Conclu√≠do!", emoji: "üßò" },
    { id: 4, nome: "Habituado", descricao: "Dia 4 Conclu√≠do!", emoji: "‚ö°" },
    { id: 5, nome: "Planejador", descricao: "Dia 5 Conclu√≠do!", emoji: "üéØ" },
    { id: 6, nome: "Visualizador", descricao: "Dia 6 Conclu√≠do!", emoji: "üé¨" },
    { id: 7, nome: "Campe√£o dos 7 Dias", descricao: "Todos os dias completados!", emoji: "üèÜ" }
];

// State Management (usando vari√°veis em mem√≥ria ao inv√©s de localStorage)
let appState = {
    completedDays: [],
    currentDay: null,
    userInputs: {},
    checkedSections: {},
    earnedBadges: []
};

// Inicializa√ß√£o
document.addEventListener('DOMContentLoaded', () => {
    initializeApp();
});

function initializeApp() {
    renderDashboard();
    updateProgressBar();
    showRandomMotivationalQuote();
    setupEventListeners();
}

function setupEventListeners() {
    document.getElementById('pdfButton').addEventListener('click', generatePDF);
    document.getElementById('backToDashboard').addEventListener('click', showDashboard);
    document.getElementById('completeDayButton').addEventListener('click', completeCurrentDay);
    document.getElementById('nextDayButton').addEventListener('click', goToNextDay);
    document.getElementById('closeBadgeModal').addEventListener('click', closeBadgeModal);
}

function renderDashboard() {
    const grid = document.getElementById('daysGrid');
    grid.innerHTML = '';
    
    diasData.forEach((dia, index) => {
        const isCompleted = appState.completedDays.includes(dia.id);
        const isLocked = index > 0 && !appState.completedDays.includes(diasData[index - 1].id);
        const isAvailable = !isLocked && !isCompleted;
        
        const card = document.createElement('div');
        card.className = `day-card ${isLocked ? 'locked' : ''} ${isCompleted ? 'completed' : ''}`;
        
        if (!isLocked) {
            card.addEventListener('click', () => showDay(dia.id));
        }
        
        card.innerHTML = `
            <div class="day-card-header">
                <span class="day-number">DIA ${dia.id}</span>
                <span class="day-status">${isLocked ? 'üîí' : isCompleted ? '‚úÖ' : 'üìñ'}</span>
            </div>
            <div class="day-icon">${dia.icone}</div>
            <h3 class="day-title">${dia.titulo}</h3>
            <p class="day-description">${dia.descricao}</p>
            <span class="day-time">‚è±Ô∏è ${dia.tempoEstimado}</span>
        `;
        
        grid.appendChild(card);
    });
    
    renderBadges();
}

function renderBadges() {
    if (appState.earnedBadges.length === 0) {
        document.getElementById('badgesSection').style.display = 'none';
        return;
    }
    
    document.getElementById('badgesSection').style.display = 'block';
    const container = document.getElementById('badgesContainer');
    container.innerHTML = '';
    
    appState.earnedBadges.forEach(badgeId => {
        const badge = badges.find(b => b.id === badgeId);
        if (badge) {
            const badgeEl = document.createElement('div');
            badgeEl.className = 'badge';
            badgeEl.innerHTML = `
                <span class="badge-emoji">${badge.emoji}</span>
                <div class="badge-info">
                    <h4>${badge.nome}</h4>
                    <p>${badge.descricao}</p>
                </div>
            `;
            container.appendChild(badgeEl);
        }
    });
}

function showDay(dayId) {
    const dia = diasData.find(d => d.id === dayId);
    if (!dia) return;
    
    appState.currentDay = dayId;
    
    document.getElementById('dashboardView').classList.remove('active');
    document.getElementById('dayView').classList.add('active');
    
    document.getElementById('dayBreadcrumb').textContent = `Dia ${dayId} de 7`;
    
    renderDayContent(dia);
    updateDayButtons(dayId);
    
    window.scrollTo(0, 0);
}

function renderDayContent(dia) {
    const container = document.getElementById('dayContent');
    container.innerHTML = `<h2>${dia.icone} Dia ${dia.id}: ${dia.titulo}</h2>`;
    
    dia.conteudo.forEach((secao, index) => {
        const section = document.createElement('div');
        section.className = 'day-section';
        const sectionId = `day${dia.id}_section${index}`;
        
        if (secao.tipo === 'intro' || secao.tipo === 'verdade') {
            section.innerHTML = `
                <h3>${secao.titulo}</h3>
                <p>${secao.texto}</p>
                <div class="section-checkbox">
                    <input type="checkbox" id="${sectionId}" ${appState.checkedSections[sectionId] ? 'checked' : ''}>
                    <label for="${sectionId}">Li e entendi esta se√ß√£o</label>
                </div>
            `;
        } else if (secao.tipo === 'exercicio') {
            let html = `<div class="exercise-box"><h4>${secao.titulo}</h4>`;
            
            secao.perguntas.forEach((pergunta, i) => {
                const inputId = `day${dia.id}_input${index}_${i}`;
                const savedValue = appState.userInputs[inputId] || '';
                html += `
                    <div class="input-field">
                        <label>${pergunta}</label>
                        <textarea id="${inputId}" rows="3">${savedValue}</textarea>
                    </div>
                `;
            });
            
            html += `</div>
                <div class="section-checkbox">
                    <input type="checkbox" id="${sectionId}" ${appState.checkedSections[sectionId] ? 'checked' : ''}>
                    <label for="${sectionId}">Completei este exerc√≠cio</label>
                </div>
            `;
            section.innerHTML = html;
        } else if (secao.tipo === 'afirmacao') {
            section.innerHTML = `
                <h3>${secao.titulo}</h3>
                <p>${secao.texto}</p>
                <div class="affirmation-box">
                    <p class="affirmation-text">"${secao.afirmacao}"</p>
                    <button class="btn-copy" onclick="copyAffirmation('${secao.afirmacao.replace(/'/g, "\\'")}')">üìã Copiar Afirma√ß√£o</button>
                </div>
                <div class="section-checkbox">
                    <input type="checkbox" id="${sectionId}" ${appState.checkedSections[sectionId] ? 'checked' : ''}>
                    <label for="${sectionId}">Repeti esta afirma√ß√£o em voz alta</label>
                </div>
            `;
        } else if (secao.tipo === 'afirmacoes') {
            let html = `<h3>${secao.titulo}</h3><ul class="affirmations-list">`;
            secao.lista.forEach(aff => {
                html += `<li>${aff}</li>`;
            });
            html += `</ul>
                <div class="section-checkbox">
                    <input type="checkbox" id="${sectionId}" ${appState.checkedSections[sectionId] ? 'checked' : ''}>
                    <label for="${sectionId}">Li todas as afirma√ß√µes</label>
                </div>
            `;
            section.innerHTML = html;
        } else if (secao.tipo === 'guia' || secao.tipo === 'protocolo') {
            let html = `<h3>${secao.titulo}</h3>`;
            if (secao.texto) html += `<p>${secao.texto}</p>`;
            if (secao.passos) {
                html += `<ul class="affirmations-list">`;
                secao.passos.forEach(passo => {
                    html += `<li>${passo}</li>`;
                });
                html += `</ul>`;
            }
            html += `
                <div class="section-checkbox">
                    <input type="checkbox" id="${sectionId}" ${appState.checkedSections[sectionId] ? 'checked' : ''}>
                    <label for="${sectionId}">Completei esta pr√°tica</label>
                </div>
            `;
            section.innerHTML = html;
        } else if (secao.tipo === 'habitos' || secao.tipo === 'metodo') {
            let html = `<h3>${secao.titulo}</h3>`;
            if (secao.texto) html += `<p style="white-space: pre-line;">${secao.texto}</p>`;
            if (secao.lista) {
                secao.lista.forEach(item => {
                    if (typeof item === 'object') {
                        html += `<div class="exercise-box"><h4>${item.nome}</h4><p>${item.descricao}</p></div>`;
                    } else {
                        html += `<div class="exercise-box"><p>${item}</p></div>`;
                    }
                });
            }
            html += `
                <div class="section-checkbox">
                    <input type="checkbox" id="${sectionId}" ${appState.checkedSections[sectionId] ? 'checked' : ''}>
                    <label for="${sectionId}">Li e entendi esta se√ß√£o</label>
                </div>
            `;
            section.innerHTML = html;
        } else if (secao.tipo === 'plano') {
            let html = `<h3>${secao.titulo}</h3>`;
            secao.fases.forEach(fase => {
                html += `<div class="exercise-box"><h4>${fase.nome}</h4><p>${fase.descricao}</p></div>`;
            });
            html += `
                <div class="section-checkbox">
                    <input type="checkbox" id="${sectionId}" ${appState.checkedSections[sectionId] ? 'checked' : ''}>
                    <label for="${sectionId}">Entendi o plano</label>
                </div>
            `;
            section.innerHTML = html;
        } else if (secao.tipo === 'acao' || secao.tipo === 'finalizacao') {
            section.innerHTML = `
                <h3>${secao.titulo}</h3>
                <p>${secao.texto}</p>
                <div class="section-checkbox">
                    <input type="checkbox" id="${sectionId}" ${appState.checkedSections[sectionId] ? 'checked' : ''}>
                    <label for="${sectionId}">Completei esta a√ß√£o</label>
                </div>
            `;
        }
        
        container.appendChild(section);
    });
    
    // Add event listeners to checkboxes and textareas
    container.querySelectorAll('input[type="checkbox"]').forEach(cb => {
        cb.addEventListener('change', (e) => {
            appState.checkedSections[e.target.id] = e.target.checked;
        });
    });
    
    container.querySelectorAll('textarea').forEach(ta => {
        ta.addEventListener('input', (e) => {
            appState.userInputs[e.target.id] = e.target.value;
        });
    });
}

function updateDayButtons(dayId) {
    const isCompleted = appState.completedDays.includes(dayId);
    const completeBtn = document.getElementById('completeDayButton');
    const nextBtn = document.getElementById('nextDayButton');
    
    if (isCompleted) {
        completeBtn.textContent = '‚úì Dia Completo';
        completeBtn.disabled = true;
        
        if (dayId < 7) {
            nextBtn.style.display = 'block';
        } else {
            nextBtn.style.display = 'none';
        }
    } else {
        completeBtn.textContent = '‚úì Marcar Dia Como Completo';
        completeBtn.disabled = false;
        nextBtn.style.display = 'none';
    }
}

function completeCurrentDay() {
    const dayId = appState.currentDay;
    if (!dayId || appState.completedDays.includes(dayId)) return;
    
    appState.completedDays.push(dayId);
    appState.earnedBadges.push(dayId);
    
    updateProgressBar();
    updateDayButtons(dayId);
    
    // Show celebration
    celebrateCompletion(dayId);
    showBadgeModal(dayId);
}

function celebrateCompletion(dayId) {
    // Confetti animation
    if (typeof confetti !== 'undefined') {
        confetti({
            particleCount: 100,
            spread: 70,
            origin: { y: 0.6 }
        });
    }
}

function showBadgeModal(dayId) {
    const badge = badges.find(b => b.id === dayId);
    if (!badge) return;
    
    document.getElementById('badgeIcon').textContent = badge.emoji;
    document.getElementById('badgeName').textContent = badge.nome;
    document.getElementById('badgeDescription').textContent = badge.descricao;
    
    document.getElementById('badgeModal').classList.add('active');
}

function closeBadgeModal() {
    document.getElementById('badgeModal').classList.remove('active');
}

function goToNextDay() {
    const currentId = appState.currentDay;
    if (currentId < 7) {
        showDay(currentId + 1);
    }
}

function showDashboard() {
    document.getElementById('dayView').classList.remove('active');
    document.getElementById('dashboardView').classList.add('active');
    appState.currentDay = null;
    renderDashboard();
    window.scrollTo(0, 0);
}

function updateProgressBar() {
    const completed = appState.completedDays.length;
    const total = 7;
    const percentage = Math.round((completed / total) * 100);
    
    document.getElementById('progressText').textContent = `${completed} de ${total} dias completados`;
    document.getElementById('progressPercent').textContent = `${percentage}%`;
    document.getElementById('progressBar').style.width = `${percentage}%`;
    
    if (completed === 7) {
        document.getElementById('progressTitle').textContent = 'üéâ Parab√©ns! Voc√™ Completou os 7 Dias!';
    }
}

function showRandomMotivationalQuote() {
    const quote = motivationalMessages[Math.floor(Math.random() * motivationalMessages.length)];
    document.getElementById('motivationalQuote').textContent = `"${quote}"`;
}

function copyAffirmation(text) {
    navigator.clipboard.writeText(text).then(() => {
        alert('Afirma√ß√£o copiada! ‚úì');
    });
}

function generatePDF() {
    // Create a printable version
    const printContent = document.createElement('div');
    printContent.style.padding = '40px';
    printContent.style.fontFamily = 'Inter, sans-serif';
    printContent.style.color = '#000';
    printContent.style.backgroundColor = '#fff';
    printContent.style.maxWidth = '800px';
    printContent.style.margin = '0 auto';
    
    // Header
    printContent.innerHTML = `
        <div style="text-align: center; margin-bottom: 40px; border-bottom: 3px solid #FFD700; padding-bottom: 20px;">
            <h1 style="color: #1a472a; font-size: 32px; margin-bottom: 10px;">Os 7 Dias da Mentalidade Vanguarda</h1>
            <p style="color: #666; font-size: 18px;">@mentalidadevanguarda</p>
            <p style="color: #4CAF50; font-size: 16px; margin-top: 10px;">${appState.completedDays.length} de 7 dias completados</p>
        </div>
    `;
    
    // Add each day content
    diasData.forEach(dia => {
        const isCompleted = appState.completedDays.includes(dia.id);
        
        printContent.innerHTML += `
            <div style="page-break-inside: avoid; margin-bottom: 40px;">
                <h2 style="color: #1a472a; font-size: 24px; margin-bottom: 15px; border-left: 5px solid #FFD700; padding-left: 15px;">
                    ${dia.icone} Dia ${dia.id}: ${dia.titulo} ${isCompleted ? '‚úÖ' : ''}
                </h2>
                <p style="color: #666; margin-bottom: 20px;">${dia.descricao}</p>
        `;
        
        dia.conteudo.forEach((secao, index) => {
            printContent.innerHTML += `<div style="margin: 20px 0; padding: 15px; background: #f5f5f5; border-radius: 8px;">`;
            printContent.innerHTML += `<h3 style="color: #4CAF50; font-size: 18px; margin-bottom: 10px;">${secao.titulo}</h3>`;
            
            if (secao.texto) {
                printContent.innerHTML += `<p style="line-height: 1.8; color: #333;">${secao.texto}</p>`;
            }
            
            if (secao.perguntas) {
                secao.perguntas.forEach((pergunta, i) => {
                    const inputId = `day${dia.id}_input${index}_${i}`;
                    const userAnswer = appState.userInputs[inputId] || '(N√£o respondido)';
                    printContent.innerHTML += `
                        <div style="margin: 15px 0;">
                            <p style="font-weight: 600; color: #1a472a; margin-bottom: 5px;">${pergunta}</p>
                            <p style="color: #666; padding: 10px; background: white; border-radius: 4px;">${userAnswer}</p>
                        </div>
                    `;
                });
            }
            
            if (secao.afirmacao) {
                printContent.innerHTML += `<p style="font-style: italic; color: #FFD700; background: #fffbeb; padding: 15px; border-radius: 8px; margin-top: 10px;">"${secao.afirmacao}"</p>`;
            }
            
            if (secao.lista) {
                printContent.innerHTML += '<ul style="margin: 10px 0; padding-left: 20px;">';
                secao.lista.forEach(item => {
                    if (typeof item === 'object') {
                        printContent.innerHTML += `<li style="margin: 10px 0; color: #333;"><strong>${item.nome}:</strong> ${item.descricao}</li>`;
                    } else {
                        printContent.innerHTML += `<li style="margin: 10px 0; color: #333;">${item}</li>`;
                    }
                });
                printContent.innerHTML += '</ul>';
            }
            
            if (secao.passos) {
                printContent.innerHTML += '<ol style="margin: 10px 0; padding-left: 20px;">';
                secao.passos.forEach(passo => {
                    printContent.innerHTML += `<li style="margin: 10px 0; color: #333;">${passo}</li>`;
                });
                printContent.innerHTML += '</ol>';
            }
            
            if (secao.fases) {
                secao.fases.forEach(fase => {
                    printContent.innerHTML += `
                        <div style="margin: 15px 0; padding: 10px; background: white; border-radius: 4px;">
                            <h4 style="color: #1a472a; margin-bottom: 5px;">${fase.nome}</h4>
                            <p style="color: #666;">${fase.descricao}</p>
                        </div>
                    `;
                });
            }
            
            printContent.innerHTML += `</div>`;
        });
        
        printContent.innerHTML += `</div>`;
    });
    
    // Footer
    printContent.innerHTML += `
        <div style="text-align: center; margin-top: 60px; padding-top: 20px; border-top: 2px solid #FFD700;">
            <p style="color: #666;">¬© 2025 @mentalidadevanguarda | Gerado em ${new Date().toLocaleDateString('pt-BR')}</p>
        </div>
    `;
    
    // Generate PDF
    const opt = {
        margin: 10,
        filename: 'Mentalidade-Vanguarda-7Dias.pdf',
        image: { type: 'jpeg', quality: 0.98 },
        html2canvas: { scale: 2 },
        jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
    };
    
    html2pdf().set(opt).from(printContent).save();
}

// Make copyAffirmation available globally
window.copyAffirmation = copyAffirmation;